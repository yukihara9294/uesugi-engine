# 手動データダウンロードガイド（非エンジニア向け）

## 概要
このガイドでは、自動取得できないデータを手動でダウンロードし、Uesugi Engineに取り込む方法を説明します。

## 必要なデータ一覧

### 1. RESAS（地域経済分析システム）データ
**理由**: 旧APIは停止、新しいデータは手動ダウンロードのみ

### 2. 各自治体のオープンデータ
**理由**: APIが提供されていない、または登録が複雑

### 3. 国土数値情報
**理由**: 大容量データのため手動ダウンロード推奨

### 4. 交通事業者のGTFSデータ
**理由**: 個別にダウンロードが必要

---

## 詳細ダウンロード手順

### 1. RESAS（地域経済分析システム）

#### アクセス方法
1. ブラウザで https://resas.go.jp/ を開く
2. 右上の「ログイン」をクリック（アカウント作成が必要）
3. メールアドレスで無料登録

#### ダウンロード手順
1. ログイン後、「マップで見る」をクリック
2. 左メニューから必要なデータを選択：
   - **人口マップ** → 人口構成
   - **地域経済循環マップ** → 生産分析
   - **産業構造マップ** → 全産業の構造
   - **観光マップ** → 目的地分析

3. 対象地域を選択：
   - 広島県 → 広島市
   - 山口県 → 山口市
   - 福岡県 → 福岡市
   - 大阪府 → 大阪市
   - 東京都 → 特別区部

4. 画面右上の「ダウンロード」ボタンをクリック
5. CSV形式を選択してダウンロード

#### 保存場所
```
uesugi-engine-data/
└── resas/
    ├── hiroshima/
    │   ├── population_YYYYMMDD.csv
    │   ├── economy_YYYYMMDD.csv
    │   └── tourism_YYYYMMDD.csv
    ├── yamaguchi/
    ├── fukuoka/
    ├── osaka/
    └── tokyo/
```

### 2. 山口県オープンデータ（93件）

#### アクセス方法
1. https://yamaguchi-opendata.jp/ を開く
2. 登録不要、利用規約に同意するだけ

#### ダウンロード手順
1. トップページの「データカタログ」をクリック
2. 以下のカテゴリから順番にダウンロード：

**必須データ（優先度高）**
- 観光・イベント → 「観光地一覧」「イベントカレンダー」
- 人口・世帯 → 「市町村別人口統計」
- 施設 → 「公共施設一覧」

**推奨データ**
- 防災・安全 → 「避難所一覧」「AED設置場所」
- 健康・福祉 → 「医療機関一覧」
- 教育・文化 → 「学校一覧」「図書館一覧」

3. 各データの「CSVダウンロード」ボタンをクリック

#### 保存場所
```
uesugi-engine-data/
└── yamaguchi/
    └── opendata/
        ├── tourism/
        │   ├── tourist_spots.csv
        │   └── events.csv
        ├── population/
        │   └── population_by_city.csv
        └── facilities/
            └── public_facilities.csv
```

### 3. 国土数値情報

#### アクセス方法
1. https://nlftp.mlit.go.jp/ksj/ を開く
2. 利用規約に同意

#### ダウンロード手順
1. 「データダウンロード」をクリック
2. 必要なデータを選択：

**土地利用データ**
- 「1.国土（水・土地）」→「土地利用3次メッシュ」
- 対象都道府県を選択（広島、山口、福岡、大阪、東京）
- 最新年度を選択してダウンロード

**施設データ**
- 「3.地域」→「公共施設」
- 対象都道府県を選択
- ZIPファイルをダウンロード

**交通データ**
- 「4.交通」→「バスルート」「バス停留所」
- 対象都道府県を選択

#### 保存場所
```
uesugi-engine-data/
└── kokudosuuchi/
    ├── landuse/
    │   ├── L03-b-16_34.zip  (広島)
    │   ├── L03-b-16_35.zip  (山口)
    │   └── ...
    ├── facilities/
    │   └── P02-06_34.zip    (広島の施設)
    └── transport/
        └── N07_34.zip       (広島のバス)
```

### 4. 交通事業者GTFSデータ

#### 広島県
**JR西日本**
1. https://www.westjr.co.jp/developer/opendata/ を開く
2. 利用登録（メールアドレス必要）
3. 「GTFSデータ」→「山陽本線」をダウンロード

**広島バス**
1. http://www.hirobus.co.jp/ を開く
2. 「企業情報」→「オープンデータ」を探す
3. GTFSファイルがあればダウンロード

#### 保存場所
```
uesugi-engine-data/
└── gtfs/
    ├── jr_west/
    │   └── sanyo_line_gtfs.zip
    └── hiroshima_bus/
        └── hiroshima_bus_gtfs.zip
```

### 5. 大阪府・豊中市データ（BODIK）

#### アクセス方法
1. 大阪府: https://odcs.bodik.jp/270008/
2. 豊中市: https://odcs.bodik.jp/272035/

#### ダウンロード手順
1. データ一覧から以下を探してダウンロード：
   - 「人口統計」
   - 「施設情報」
   - 「イベント情報」
2. 各データの「CSV」リンクをクリック

#### 保存場所
```
uesugi-engine-data/
└── osaka/
    └── opendata/
        ├── osaka_pref/
        │   └── population.csv
        └── toyonaka_city/
            └── facilities.csv
```

---

## ダウンロード後の処理

### フォルダ構造の確認
1. エクスプローラー（Windows）またはFinder（Mac）を開く
2. `uesugi-engine-data`フォルダを開く
3. 上記の構造通りにフォルダを作成
4. ダウンロードしたファイルを対応するフォルダに移動

### ファイル名の統一
- 日本語ファイル名は英語に変更
- 日付は`YYYYMMDD`形式に統一
- スペースはアンダースコア`_`に置換

### データ取り込みの実行
1. VSCodeでターミナルを開く
2. 以下のコマンドを実行：
```bash
cd ~/projects/uesugi-engine
python scripts/import_manual_data.py
```

---

## よくある質問

**Q: ダウンロードしたファイルが開けない**
A: ZIPファイルは右クリック→「展開」または「解凍」してください

**Q: CSVファイルが文字化けする**
A: Excelではなくメモ帳で開いて確認してください。取り込み時に自動変換されます

**Q: どのデータを優先すべき？**
A: 以下の順番で収集してください：
1. 山口県オープンデータ（観光・人口）
2. RESAS（産業構造・観光）
3. 国土数値情報（土地利用）
4. 交通GTFSデータ

**Q: ファイルサイズが大きすぎる**
A: 100MB以上のファイルは分割されることがあります。全てダウンロードしてください

---

## データ収集チェックリスト

### 山口県
- [ ] 観光地一覧CSV
- [ ] イベントカレンダーCSV
- [ ] 人口統計CSV
- [ ] 公共施設一覧CSV

### 広島県
- [ ] JR西日本GTFS
- [ ] 広島バスデータ
- [ ] RESASデータ

### 福岡県
- [ ] 西鉄GTFSまたは路線データ
- [ ] 福岡市オープンデータ

### 大阪府
- [ ] BODIK大阪府データ
- [ ] BODIK豊中市データ

### 東京都
- [ ] 追加の詳細データ（ODPT以外）

---

*作成日: 2025年6月11日*