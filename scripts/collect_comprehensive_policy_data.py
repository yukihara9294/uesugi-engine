#!/usr/bin/env python3
"""
Uesugi Engine åŒ…æ‹¬çš„æ–½ç­–ãƒ‡ãƒ¼ã‚¿åé›†ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
è¦³å…‰ã ã‘ã§ãªãã€ã‚ã‚‰ã‚†ã‚‹è¡Œæ”¿æ–½ç­–ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’åé›†
"""
import requests
import json
from datetime import datetime
from pathlib import Path
import logging

logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(levelname)s - %(message)s'
)
logger = logging.getLogger(__name__)


class ComprehensivePolicyDataCollector:
    """åŒ…æ‹¬çš„æ–½ç­–ãƒ‡ãƒ¼ã‚¿åé›†ã‚¯ãƒ©ã‚¹"""
    
    def __init__(self):
        self.data_dir = Path("uesugi-engine-data/comprehensive-policy")
        self.data_dir.mkdir(parents=True, exist_ok=True)
        self.estat_key = "c11c2e7910b7810c15770f829b52bb1a75d283ed"
        
    def collect_education_data(self):
        """æ•™è‚²æ–½ç­–ãƒ‡ãƒ¼ã‚¿åé›†"""
        logger.info("=== æ•™è‚²æ–½ç­–ãƒ‡ãƒ¼ã‚¿åé›† ===")
        
        education_data = {
            "å­¦æ ¡åŸºæœ¬èª¿æŸ»": {
                "source": "æ–‡éƒ¨ç§‘å­¦çœ",
                "data": [
                    "å­¦æ ¡æ•°ãƒ»ç”Ÿå¾’æ•°ãƒ»æ•™å“¡æ•°",
                    "é€²å­¦ç‡ãƒ»å°±è·ç‡",
                    "ä¸ç™»æ ¡ãƒ»ã„ã˜ã‚çµ±è¨ˆ",
                    "ICTæ´»ç”¨çŠ¶æ³"
                ],
                "update": "å¹´æ¬¡",
                "usage": "æ•™è‚²æ”¿ç­–ã®åŠ¹æœæ¸¬å®š"
            },
            "å…¨å›½å­¦åŠ›ãƒ»å­¦ç¿’çŠ¶æ³èª¿æŸ»": {
                "source": "æ–‡éƒ¨ç§‘å­¦çœ",
                "data": [
                    "éƒ½é“åºœçœŒåˆ¥å­¦åŠ›",
                    "ç”Ÿæ´»ç¿’æ…£èª¿æŸ»",
                    "å­¦ç¿’ç’°å¢ƒèª¿æŸ»"
                ],
                "update": "å¹´æ¬¡",
                "usage": "æ•™è‚²æ–½ç­–ã®æˆæœæ¤œè¨¼"
            },
            "åœ°æ–¹æ•™è‚²è²»èª¿æŸ»": {
                "source": "æ–‡éƒ¨ç§‘å­¦çœ",
                "data": [
                    "æ•™è‚²äºˆç®—ãƒ»æ”¯å‡º",
                    "æ–½è¨­æ•´å‚™è²»",
                    "æ•™å“¡äººä»¶è²»"
                ],
                "update": "å¹´æ¬¡",
                "usage": "æ•™è‚²æŠ•è³‡åŠ¹æœåˆ†æ"
            }
        }
        
        # e-Statã‹ã‚‰æ•™è‚²çµ±è¨ˆã‚’æ¤œç´¢
        self._search_estat_data("æ•™è‚²", "00400", education_data)
        
        # ä¿å­˜
        self._save_data("education_policy_data.json", education_data)
        return education_data
        
    def collect_healthcare_data(self):
        """åŒ»ç™‚ãƒ»ç¦ç¥‰æ–½ç­–ãƒ‡ãƒ¼ã‚¿åé›†"""
        logger.info("=== åŒ»ç™‚ãƒ»ç¦ç¥‰æ–½ç­–ãƒ‡ãƒ¼ã‚¿åé›† ===")
        
        healthcare_data = {
            "åŒ»ç™‚æ–½è¨­èª¿æŸ»": {
                "source": "åšç”ŸåŠ´åƒçœ",
                "data": [
                    "ç—…é™¢ãƒ»è¨ºç™‚æ‰€æ•°",
                    "ç—…åºŠæ•°ãƒ»åŒ»å¸«æ•°",
                    "è¨ºç™‚ç§‘åˆ¥æ–½è¨­æ•°",
                    "åœ°åŸŸåˆ¥åŒ»ç™‚è³‡æº"
                ],
                "update": "3å¹´æ¯",
                "usage": "åŒ»ç™‚ã‚¢ã‚¯ã‚»ã‚¹æ”¹å–„åŠ¹æœ"
            },
            "æ‚£è€…èª¿æŸ»": {
                "source": "åšç”ŸåŠ´åƒçœ",
                "data": [
                    "ç–¾ç—…åˆ¥æ‚£è€…æ•°",
                    "å¹³å‡åœ¨é™¢æ—¥æ•°",
                    "å¤–æ¥å—ç™‚ç‡"
                ],
                "update": "3å¹´æ¯",
                "usage": "åŒ»ç™‚éœ€è¦äºˆæ¸¬"
            },
            "ä»‹è­·ä¿é™ºäº‹æ¥­çŠ¶æ³å ±å‘Š": {
                "source": "åšç”ŸåŠ´åƒçœ",
                "data": [
                    "è¦ä»‹è­·èªå®šè€…æ•°",
                    "ä»‹è­·ã‚µãƒ¼ãƒ“ã‚¹åˆ©ç”¨çŠ¶æ³",
                    "ä»‹è­·çµ¦ä»˜è²»"
                ],
                "update": "æœˆæ¬¡",
                "usage": "é«˜é½¢è€…ç¦ç¥‰æ–½ç­–è©•ä¾¡"
            },
            "æ•‘æ€¥æ¬é€ãƒ‡ãƒ¼ã‚¿": {
                "source": "æ¶ˆé˜²åº",
                "data": [
                    "æ•‘æ€¥å‡ºå‹•ä»¶æ•°",
                    "æ¬é€æ™‚é–“",
                    "æ¬é€å…ˆåŒ»ç™‚æ©Ÿé–¢"
                ],
                "update": "å¹´æ¬¡",
                "usage": "æ•‘æ€¥ä½“åˆ¶æ•´å‚™åŠ¹æœ"
            }
        }
        
        self._save_data("healthcare_policy_data.json", healthcare_data)
        return healthcare_data
        
    def collect_disaster_prevention_data(self):
        """é˜²ç½æ–½ç­–ãƒ‡ãƒ¼ã‚¿åé›†"""
        logger.info("=== é˜²ç½æ–½ç­–ãƒ‡ãƒ¼ã‚¿åé›† ===")
        
        disaster_data = {
            "ç½å®³æƒ…å ±": {
                "source": "å†…é–£åºœé˜²ç½",
                "data": [
                    "éå»ã®ç½å®³å±¥æ­´",
                    "è¢«å®³çŠ¶æ³çµ±è¨ˆ",
                    "é¿é›£æ‰€æƒ…å ±",
                    "ãƒã‚¶ãƒ¼ãƒ‰ãƒãƒƒãƒ—"
                ],
                "update": "éšæ™‚",
                "usage": "é˜²ç½è¨ˆç”»ç«‹æ¡ˆ"
            },
            "é˜²ç½è¨“ç·´å®Ÿæ–½çŠ¶æ³": {
                "source": "å„è‡ªæ²»ä½“",
                "data": [
                    "è¨“ç·´å®Ÿæ–½å›æ•°",
                    "å‚åŠ è€…æ•°",
                    "è¨“ç·´ç¨®åˆ¥"
                ],
                "update": "å¹´æ¬¡",
                "usage": "é˜²ç½æ„è­˜å‘ä¸ŠåŠ¹æœ"
            },
            "é˜²ç½è¨­å‚™æ•´å‚™": {
                "source": "å›½åœŸäº¤é€šçœ",
                "data": [
                    "æ²³å·æ•´å‚™çŠ¶æ³",
                    "ç ‚é˜²ãƒ€ãƒ è¨­ç½®",
                    "è€éœ‡åŒ–ç‡"
                ],
                "update": "å¹´æ¬¡",
                "usage": "ã‚¤ãƒ³ãƒ•ãƒ©æŠ•è³‡åŠ¹æœ"
            }
        }
        
        self._save_data("disaster_prevention_data.json", disaster_data)
        return disaster_data
        
    def collect_urban_planning_data(self):
        """éƒ½å¸‚è¨ˆç”»ãƒ»ã‚¤ãƒ³ãƒ•ãƒ©ãƒ‡ãƒ¼ã‚¿åé›†"""
        logger.info("=== éƒ½å¸‚è¨ˆç”»ãƒ»ã‚¤ãƒ³ãƒ•ãƒ©ãƒ‡ãƒ¼ã‚¿åé›† ===")
        
        urban_data = {
            "éƒ½å¸‚è¨ˆç”»åŸºç¤èª¿æŸ»": {
                "source": "å›½åœŸäº¤é€šçœ",
                "data": [
                    "åœŸåœ°åˆ©ç”¨ç¾æ³",
                    "å»ºç‰©ç¾æ³",
                    "éƒ½å¸‚æ–½è¨­çŠ¶æ³",
                    "äº¤é€šé‡"
                ],
                "update": "5å¹´æ¯",
                "usage": "éƒ½å¸‚è¨ˆç”»åŠ¹æœæ¸¬å®š"
            },
            "é“è·¯äº¤é€šã‚»ãƒ³ã‚µã‚¹": {
                "source": "å›½åœŸäº¤é€šçœ",
                "data": [
                    "äº¤é€šé‡èª¿æŸ»",
                    "æ—…è¡Œé€Ÿåº¦èª¿æŸ»",
                    "æ¸‹æ»çŠ¶æ³"
                ],
                "update": "5å¹´æ¯",
                "usage": "äº¤é€šæ”¿ç­–è©•ä¾¡"
            },
            "å…¬å…±äº¤é€šåˆ©ç”¨çŠ¶æ³": {
                "source": "å„äº‹æ¥­è€…",
                "data": [
                    "è·¯ç·šåˆ¥ä¹—é™å®¢æ•°",
                    "å®šæ™‚é‹è¡Œç‡",
                    "åˆ©ç”¨è€…æº€è¶³åº¦"
                ],
                "update": "å¹´æ¬¡/æœˆæ¬¡",
                "usage": "å…¬å…±äº¤é€šæ”¿ç­–åŠ¹æœ"
            }
        }
        
        self._save_data("urban_planning_data.json", urban_data)
        return urban_data
        
    def collect_economic_policy_data(self):
        """çµŒæ¸ˆãƒ»ç”£æ¥­æ–½ç­–ãƒ‡ãƒ¼ã‚¿åé›†"""
        logger.info("=== çµŒæ¸ˆãƒ»ç”£æ¥­æ–½ç­–ãƒ‡ãƒ¼ã‚¿åé›† ===")
        
        economic_data = {
            "çµŒæ¸ˆã‚»ãƒ³ã‚µã‚¹": {
                "source": "ç·å‹™çœãƒ»çµŒæ¸ˆç”£æ¥­çœ",
                "data": [
                    "äº‹æ¥­æ‰€æ•°ãƒ»å¾“æ¥­è€…æ•°",
                    "å£²ä¸Šé«˜ãƒ»ä»˜åŠ ä¾¡å€¤é¡",
                    "ç”£æ¥­åˆ¥æ§‹æˆ"
                ],
                "update": "5å¹´æ¯",
                "usage": "ç”£æ¥­æ”¿ç­–åŠ¹æœæ¸¬å®š"
            },
            "æœ‰åŠ¹æ±‚äººå€ç‡": {
                "source": "åšç”ŸåŠ´åƒçœ",
                "data": [
                    "è·ç¨®åˆ¥æ±‚äººå€ç‡",
                    "åœ°åŸŸåˆ¥é›‡ç”¨çŠ¶æ³",
                    "æ–°è¦æ±‚äººæ•°"
                ],
                "update": "æœˆæ¬¡",
                "usage": "é›‡ç”¨æ”¿ç­–è©•ä¾¡"
            },
            "å•†æ¥­çµ±è¨ˆ": {
                "source": "çµŒæ¸ˆç”£æ¥­çœ",
                "data": [
                    "å°å£²æ¥­è²©å£²é¡",
                    "å•†åº—è¡—åº—èˆ—æ•°",
                    "å¤§å‹åº—èˆ—ç«‹åœ°"
                ],
                "update": "2å¹´æ¯",
                "usage": "å•†æ¥­æŒ¯èˆˆç­–åŠ¹æœ"
            },
            "ä¼æ¥­ç«‹åœ°å‹•å‘": {
                "source": "çµŒæ¸ˆç”£æ¥­çœ",
                "data": [
                    "å·¥å ´ç«‹åœ°ä»¶æ•°",
                    "è¨­å‚™æŠ•è³‡é¡",
                    "é›‡ç”¨å‰µå‡ºæ•°"
                ],
                "update": "åŠæœŸ",
                "usage": "ä¼æ¥­èª˜è‡´åŠ¹æœ"
            }
        }
        
        self._save_data("economic_policy_data.json", economic_data)
        return economic_data
        
    def collect_environmental_data(self):
        """ç’°å¢ƒæ–½ç­–ãƒ‡ãƒ¼ã‚¿åé›†"""
        logger.info("=== ç’°å¢ƒæ–½ç­–ãƒ‡ãƒ¼ã‚¿åé›† ===")
        
        environmental_data = {
            "å¤§æ°—ç’°å¢ƒ": {
                "source": "ç’°å¢ƒçœ",
                "data": [
                    "PM2.5æ¿ƒåº¦",
                    "NOxæ¿ƒåº¦",
                    "å…‰åŒ–å­¦ã‚ªã‚­ã‚·ãƒ€ãƒ³ãƒˆ"
                ],
                "update": "æ™‚é–“æ¯",
                "usage": "å¤§æ°—ç’°å¢ƒæ”¹å–„åŠ¹æœ"
            },
            "å»ƒæ£„ç‰©å‡¦ç†": {
                "source": "ç’°å¢ƒçœ",
                "data": [
                    "ã”ã¿æ’å‡ºé‡",
                    "ãƒªã‚µã‚¤ã‚¯ãƒ«ç‡",
                    "æœ€çµ‚å‡¦åˆ†é‡"
                ],
                "update": "å¹´æ¬¡",
                "usage": "ã”ã¿å‰Šæ¸›æ”¿ç­–è©•ä¾¡"
            },
            "æ¸©å®¤åŠ¹æœã‚¬ã‚¹": {
                "source": "ç’°å¢ƒçœ",
                "data": [
                    "CO2æ’å‡ºé‡",
                    "éƒ¨é–€åˆ¥æ’å‡ºé‡",
                    "å‰Šæ¸›ç›®æ¨™é”æˆç‡"
                ],
                "update": "å¹´æ¬¡",
                "usage": "æ¸©æš–åŒ–å¯¾ç­–åŠ¹æœ"
            },
            "ç·‘åœ°ãƒ»å…¬åœ’": {
                "source": "å›½åœŸäº¤é€šçœ",
                "data": [
                    "éƒ½å¸‚å…¬åœ’é¢ç©",
                    "ç·‘è¢«ç‡",
                    "è¡—è·¯æ¨¹æœ¬æ•°"
                ],
                "update": "å¹´æ¬¡",
                "usage": "ç·‘åŒ–æ”¿ç­–åŠ¹æœ"
            }
        }
        
        self._save_data("environmental_policy_data.json", environmental_data)
        return environmental_data
        
    def collect_event_data(self):
        """å„ç¨®ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿åé›†"""
        logger.info("=== å„ç¨®ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿åé›† ===")
        
        event_data = {
            "ã‚¹ãƒãƒ¼ãƒ„ã‚¤ãƒ™ãƒ³ãƒˆ": {
                "å…¨å›½è¦æ¨¡": [
                    "å›½æ°‘ä½“è‚²å¤§ä¼š",
                    "å…¨å›½é«˜æ ¡ç·ä½“",
                    "å¸‚æ°‘ãƒãƒ©ã‚½ãƒ³å¤§ä¼š"
                ],
                "ãƒ‡ãƒ¼ã‚¿é …ç›®": [
                    "å‚åŠ è€…æ•°",
                    "è¦³å®¢å‹•å“¡æ•°",
                    "çµŒæ¸ˆåŠ¹æœ",
                    "ãƒœãƒ©ãƒ³ãƒ†ã‚£ã‚¢æ•°"
                ]
            },
            "æ–‡åŒ–ã‚¤ãƒ™ãƒ³ãƒˆ": {
                "ç¨®é¡": [
                    "éŸ³æ¥½ç¥­ãƒ»èŠ¸è¡“ç¥­",
                    "ä¼çµ±ç¥­ã‚Š",
                    "èŠ±ç«å¤§ä¼š",
                    "ã‚¤ãƒ«ãƒŸãƒãƒ¼ã‚·ãƒ§ãƒ³"
                ],
                "æ¸¬å®šæŒ‡æ¨™": [
                    "æ¥å ´è€…æ•°",
                    "æº€è¶³åº¦èª¿æŸ»",
                    "SNSè¨€åŠæ•°",
                    "å‘¨è¾ºæ¶ˆè²»é¡"
                ]
            },
            "ãƒ“ã‚¸ãƒã‚¹ã‚¤ãƒ™ãƒ³ãƒˆ": {
                "MICE": [
                    "å›½éš›ä¼šè­°",
                    "å±•ç¤ºä¼šãƒ»è¦‹æœ¬å¸‚",
                    "ä¼æ¥­ã‚¤ãƒ³ã‚»ãƒ³ãƒ†ã‚£ãƒ–",
                    "å­¦ä¼šãƒ»ã‚·ãƒ³ãƒã‚¸ã‚¦ãƒ "
                ],
                "åŠ¹æœæ¸¬å®š": [
                    "å‚åŠ ä¼æ¥­æ•°",
                    "å•†è«‡æˆç´„é¡",
                    "å®¿æ³Šè€…æ•°",
                    "ç¶™ç¶šé–‹å‚¬ç‡"
                ]
            },
            "å¸‚æ°‘æ´»å‹•ã‚¤ãƒ™ãƒ³ãƒˆ": {
                "ç¨®é¡": [
                    "é˜²ç½è¨“ç·´",
                    "æ¸…æƒæ´»å‹•",
                    "å¥åº·ãƒ•ã‚§ã‚¢",
                    "å­è‚²ã¦ã‚¤ãƒ™ãƒ³ãƒˆ"
                ],
                "ç¤¾ä¼šçš„åŠ¹æœ": [
                    "å‚åŠ ç‡",
                    "èªçŸ¥åº¦å‘ä¸Š",
                    "è¡Œå‹•å¤‰å®¹ç‡",
                    "ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£å½¢æˆ"
                ]
            }
        }
        
        self._save_data("comprehensive_event_data.json", event_data)
        return event_data
        
    def _search_estat_data(self, keyword, stats_code, result_dict):
        """e-Statã‹ã‚‰ãƒ‡ãƒ¼ã‚¿æ¤œç´¢"""
        url = "https://api.e-stat.go.jp/rest/3.0/app/json/getStatsList"
        params = {
            "appId": self.estat_key,
            "lang": "J",
            "searchWord": keyword,
            "statsCode": stats_code,
            "limit": 10
        }
        
        try:
            response = requests.get(url, params=params)
            if response.status_code == 200:
                data = response.json()
                if "GET_STATS_LIST" in data:
                    result_dict["e-stat_available"] = True
                    logger.info(f"âœ“ e-Statã§{keyword}ãƒ‡ãƒ¼ã‚¿åˆ©ç”¨å¯èƒ½")
        except Exception as e:
            logger.error(f"e-Statæ¤œç´¢ã‚¨ãƒ©ãƒ¼: {e}")
            
    def _save_data(self, filename, data):
        """ãƒ‡ãƒ¼ã‚¿ä¿å­˜"""
        output_path = self.data_dir / filename
        with open(output_path, 'w', encoding='utf-8') as f:
            json.dump({
                "timestamp": datetime.now().isoformat(),
                "data": data
            }, f, ensure_ascii=False, indent=2)
        logger.info(f"ä¿å­˜å®Œäº†: {output_path}")
        
    def generate_comprehensive_report(self):
        """åŒ…æ‹¬çš„ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ"""
        report_path = self.data_dir / "comprehensive_data_report.md"
        
        with open(report_path, 'w', encoding='utf-8') as f:
            f.write("# Uesugi Engine åŒ…æ‹¬çš„ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ä¸€è¦§\n\n")
            f.write("## åé›†å¯¾è±¡åˆ†é‡\n\n")
            
            f.write("### 1. è¡Œæ”¿æ–½ç­–ãƒ‡ãƒ¼ã‚¿\n")
            f.write("- **æ•™è‚²**: å­¦åŠ›èª¿æŸ»ã€å­¦æ ¡çµ±è¨ˆã€æ•™è‚²æŠ•è³‡åŠ¹æœ\n")
            f.write("- **åŒ»ç™‚ãƒ»ç¦ç¥‰**: åŒ»ç™‚è³‡æºã€æ‚£è€…å‹•å‘ã€ä»‹è­·éœ€è¦\n")
            f.write("- **é˜²ç½**: ç½å®³å±¥æ­´ã€è¨“ç·´å®Ÿæ–½ã€ã‚¤ãƒ³ãƒ•ãƒ©æ•´å‚™\n")
            f.write("- **éƒ½å¸‚è¨ˆç”»**: åœŸåœ°åˆ©ç”¨ã€äº¤é€šæµå‹•ã€å…¬å…±æ–½è¨­\n")
            f.write("- **çµŒæ¸ˆãƒ»ç”£æ¥­**: é›‡ç”¨çµ±è¨ˆã€ä¼æ¥­å‹•å‘ã€å•†æ¥­æ´»æ€§åŒ–\n")
            f.write("- **ç’°å¢ƒ**: å¤§æ°—è³ªã€å»ƒæ£„ç‰©ã€æ¸©å®¤åŠ¹æœã‚¬ã‚¹ã€ç·‘åœ°\n\n")
            
            f.write("### 2. ã‚¤ãƒ™ãƒ³ãƒˆåŠ¹æœãƒ‡ãƒ¼ã‚¿\n")
            f.write("- **ã‚¹ãƒãƒ¼ãƒ„**: å¤§ä¼šè¦æ¨¡ã€çµŒæ¸ˆåŠ¹æœã€ãƒ¬ã‚¬ã‚·ãƒ¼\n")
            f.write("- **æ–‡åŒ–**: é›†å®¢åŠ›ã€æº€è¶³åº¦ã€åœ°åŸŸãƒ–ãƒ©ãƒ³ãƒ‰\n")
            f.write("- **ãƒ“ã‚¸ãƒã‚¹**: MICEåŠ¹æœã€å•†è«‡å®Ÿç¸¾ã€ç¶™ç¶šæ€§\n")
            f.write("- **å¸‚æ°‘æ´»å‹•**: å‚åŠ ç‡ã€æ„è­˜å¤‰åŒ–ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£\n\n")
            
            f.write("### 3. åˆ†æå¯èƒ½ãªå› æœé–¢ä¿‚\n")
            f.write("- æ•™è‚²æŠ•è³‡ â†’ å­¦åŠ›å‘ä¸Šãƒ»åœ°åŸŸå®šç€\n")
            f.write("- åŒ»ç™‚å……å®Ÿ â†’ å¥åº·å¯¿å‘½ãƒ»äººå£ç¶­æŒ\n")
            f.write("- é˜²ç½æŠ•è³‡ â†’ è¢«å®³è»½æ¸›ãƒ»å®‰å¿ƒåº¦\n")
            f.write("- ã‚¤ãƒ³ãƒ•ãƒ©æ•´å‚™ â†’ çµŒæ¸ˆæ´»æ€§åŒ–ãƒ»åˆ©ä¾¿æ€§\n")
            f.write("- ç’°å¢ƒæ”¹å–„ â†’ ç”Ÿæ´»è³ªãƒ»åœ°åŸŸé­…åŠ›\n")
            f.write("- ã‚¤ãƒ™ãƒ³ãƒˆé–‹å‚¬ â†’ èªçŸ¥åº¦ãƒ»çµŒæ¸ˆåŠ¹æœãƒ»ç¤¾ä¼šè³‡æœ¬\n\n")
            
            f.write("### 4. Uesugi Engineã®ä¾¡å€¤\n")
            f.write("- **çµ±åˆåˆ†æ**: åˆ†é‡æ¨ªæ–­çš„ãªåŠ¹æœæ¸¬å®š\n")
            f.write("- **å› æœæ¨è«–**: ç§‘å­¦çš„ãªæ”¿ç­–è©•ä¾¡\n")
            f.write("- **äºˆæ¸¬æ©Ÿèƒ½**: æ–½ç­–åŠ¹æœã®äº‹å‰è©•ä¾¡\n")
            f.write("- **å¯è¦–åŒ–**: ä½æ°‘ã¸ã®åˆ†ã‹ã‚Šã‚„ã™ã„èª¬æ˜\n")
            
        logger.info(f"åŒ…æ‹¬çš„ãƒ¬ãƒãƒ¼ãƒˆä½œæˆ: {report_path}")
        return report_path


def main():
    """ãƒ¡ã‚¤ãƒ³å‡¦ç†"""
    print("ğŸ›ï¸ Uesugi Engine åŒ…æ‹¬çš„æ–½ç­–ãƒ‡ãƒ¼ã‚¿åé›†")
    print("="*60)
    print("è¦³å…‰ã ã‘ã§ãªãã€ã‚ã‚‰ã‚†ã‚‹è¡Œæ”¿æ–½ç­–ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’åé›†\n")
    
    collector = ComprehensivePolicyDataCollector()
    
    # å„åˆ†é‡ã®ãƒ‡ãƒ¼ã‚¿åé›†
    print("ğŸ“š æ•™è‚²æ–½ç­–ãƒ‡ãƒ¼ã‚¿...")
    education = collector.collect_education_data()
    
    print("\nğŸ¥ åŒ»ç™‚ãƒ»ç¦ç¥‰æ–½ç­–ãƒ‡ãƒ¼ã‚¿...")
    healthcare = collector.collect_healthcare_data()
    
    print("\nğŸš¨ é˜²ç½æ–½ç­–ãƒ‡ãƒ¼ã‚¿...")
    disaster = collector.collect_disaster_prevention_data()
    
    print("\nğŸ™ï¸ éƒ½å¸‚è¨ˆç”»ãƒ‡ãƒ¼ã‚¿...")
    urban = collector.collect_urban_planning_data()
    
    print("\nğŸ’¼ çµŒæ¸ˆãƒ»ç”£æ¥­æ–½ç­–ãƒ‡ãƒ¼ã‚¿...")
    economic = collector.collect_economic_policy_data()
    
    print("\nğŸŒ¿ ç’°å¢ƒæ–½ç­–ãƒ‡ãƒ¼ã‚¿...")
    environmental = collector.collect_environmental_data()
    
    print("\nğŸ‰ ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿...")
    events = collector.collect_event_data()
    
    # ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
    report = collector.generate_comprehensive_report()
    
    print("\nâœ… åŒ…æ‹¬çš„ãƒ‡ãƒ¼ã‚¿åé›†å®Œäº†ï¼")
    print(f"\nğŸ“ ä¿å­˜å…ˆ: {collector.data_dir}")
    print(f"ğŸ“„ ãƒ¬ãƒãƒ¼ãƒˆ: {report}")
    
    print("\n" + "="*60)
    print("ã€Uesugi Engineã§å®Ÿç¾ã™ã‚‹åˆ†æã€‘")
    print("\n1ï¸âƒ£ æ–½ç­–ã®ç·åˆè©•ä¾¡")
    print("   è¤‡æ•°æ–½ç­–ã®ç›¸ä¹—åŠ¹æœãƒ»ç›¸äº’ä½œç”¨ã‚’å¯è¦–åŒ–")
    
    print("\n2ï¸âƒ£ æŠ•è³‡åŠ¹æœã®æœ€é©åŒ–")
    print("   é™ã‚‰ã‚ŒãŸäºˆç®—ã§æœ€å¤§åŠ¹æœã‚’ç”Ÿã‚€æ–½ç­–çµ„åˆã›")
    
    print("\n3ï¸âƒ£ ä½æ°‘æº€è¶³åº¦ã®å‘ä¸Š")
    print("   ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãé€æ˜æ€§ã®é«˜ã„è¡Œæ”¿é‹å–¶")
    
    print("\n4ï¸âƒ£ åœ°åŸŸã®æŒç¶šçš„ç™ºå±•")
    print("   é•·æœŸçš„è¦–ç‚¹ã§ã®æ”¿ç­–ç«‹æ¡ˆæ”¯æ´")


if __name__ == "__main__":
    main()